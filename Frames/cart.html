<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cart - frames</title>
    <script src="bootstrap/bootstrap.bundle.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="home/home.css" />
    <link rel="stylesheet" href="cart/cart.css" />
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="navbar-brand nav-logo">
            <img src="image/frames_white_logo_svg.svg" alt="frames logo" width="65px" />
            <h1>frames</h1>
        </div>

        <div class="nav-body d-none d-lg-flex">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="shop.html">Shop</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="about.html">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="contact.html">Contact</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="terms.html">Terms</a>
                </li>
                <li class="nav-item">
                    <button class="btn user-btn" id="user">
                        <i class="bi bi-person-circle"></i>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="btn cart-btn" id="cart">
                        <i class="bi bi-cart3"></i>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="btn login-btn" id="login">LogIn</button>
                </li>
            </ul>
        </div>

        <div class="dropdown nav-dropdown d-lg-none">
            <button class="dropdown-toggle-btn" data-bs-toggle="dropdown">
                <i class="bi bi-list"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
                <li><a href="index.html" class="dropdown-item">Home</a></li>
                <li><a href="shop.html" class="dropdown-item">Shop</a></li>
                <li><a href="about.html" class="dropdown-item">About</a></li>
                <li><a href="contact.html" class="dropdown-item">Contact</a></li>
                <li><a href="terms.html" class="dropdown-item">Terms</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                    <button class="btn user-btn-mobile" id="userMobile" style="
                        border-radius: 16px;
                        background-color: #171515;
                        color: #f1d5d5;
                        margin-top: 8px;
                        border: #f1d5d5 2px solid;
                        width: 35%;
                        margin-left: 64px;">
                        <i class="bi bi-person-circle"></i>
                    </button>
                </li>
                <br />
                <li>
                    <button class="btn cart-btn w-50 mx-5" id="cartMobile" style="border-radius: 16px">
                        <i class="bi bi-cart3"></i>
                    </button>
                </li>
                <br />
                <li>
                    <button class="btn login-btn w-75 mx-4" id="loginMobile" style="border-radius: 16px">
                        LogIn
                    </button>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Cart Content -->
    <div class="cart-container">
        <div class="cart-header">
            <h1><i class="bi bi-cart3"></i> Your Cart</h1>
            <p id="cartItemCount">Loading...</p>
        </div>

        <!-- Empty Cart Message -->
        <div class="empty-cart" id="emptyCart" style="display: none;">
            <i class="bi bi-cart-x"></i>
            <h2>Your cart is empty</h2>
            <p>Browse our collection and add some frames to your cart</p>
            <button class="shop-now-btn" onclick="window.location.href='shop.html'">
                <i class="bi bi-bag-fill"></i> Shop Now
            </button>
        </div>

        <!-- Cart Items Grid -->
        <div class="cart-items-grid" id="cartItemsGrid">
            <!-- Cart items will be generated by JavaScript -->
        </div>

        <!-- Cart Summary -->
        <div class="cart-summary" id="cartSummary" style="display: none;">
            <div class="summary-content">
                <h3>Cart Summary</h3>
                <div class="summary-row">
                    <span>Subtotal:</span>
                    <span id="subtotal">₹0</span>
                </div>
                <div class="summary-row">
                    <span>Tax (18%):</span>
                    <span id="tax">₹0</span>
                </div>
                <div class="summary-row summary-total">
                    <span>Total:</span>
                    <span id="total">₹0</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Order Modal -->
    <div class="modal fade" id="orderModal" tabindex="-1" aria-labelledby="orderModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="orderModalLabel">
                        <i class="bi bi-clipboard-check"></i> Complete Your Order
                    </h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="orderFormBody">
                    <!-- Product Info -->
                    <div class="order-product-info">
                        <div class="product-image-modal">
                            <img id="modalProductImage" src="" alt="Product">
                        </div>
                        <div class="product-details-modal">
                            <h3 id="modalProductName"></h3>
                            <p class="product-category-modal" id="modalProductCategory"></p>
                            <p class="product-price-modal" id="modalProductPrice"></p>
                        </div>
                    </div>

                    <!-- Order Form -->
                    <form id="orderForm" class="order-form">
                        <!-- Lens Type Selection -->
                        <div class="form-section">
                            <h4><i class="bi bi-eyeglasses"></i> Lens Type</h4>
                            <div class="lens-type-options">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="lensType" id="powerless" value="powerless" checked onchange="togglePowerFields()">
                                    <label class="form-check-label" for="powerless">
                                        Powerless (Normal Lenses)
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="lensType" id="power" value="power" onchange="togglePowerFields()">
                                    <label class="form-check-label" for="power">
                                        Power Lenses (Prescription)
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Power Fields (Hidden by default) -->
                        <div class="form-section power-fields" id="powerFields" style="display: none;">
                            <h4><i class="bi bi-prescription2"></i> Prescription Details</h4>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="leftEyePower" class="form-label">Left Eye Power (SPH)</label>
                                    <input type="text" class="form-control" id="leftEyePower" placeholder="e.g., -2.50">
                                    <small class="form-text">Enter with + or - sign</small>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="rightEyePower" class="form-label">Right Eye Power (SPH)</label>
                                    <input type="text" class="form-control" id="rightEyePower" placeholder="e.g., -2.00">
                                    <small class="form-text">Enter with + or - sign</small>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="leftEyeCylinder" class="form-label">Left Eye Cylinder (Optional)</label>
                                    <input type="text" class="form-control" id="leftEyeCylinder" placeholder="e.g., -0.50">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="rightEyeCylinder" class="form-label">Right Eye Cylinder (Optional)</label>
                                    <input type="text" class="form-control" id="rightEyeCylinder" placeholder="e.g., -0.75">
                                </div>
                            </div>
                        </div>

                        <!-- Lens Coating -->
                        <div class="form-section">
                            <h4><i class="bi bi-shield-check"></i> Lens Coating</h4>
                            <select class="form-select" id="lensCoating" required>
                                <option value="" selected disabled>Choose coating type</option>
                                <option value="standard">Standard (Free)</option>
                                <option value="anti-glare">Anti-Glare (+₹500)</option>
                                <option value="blue-light">Blue Light Filter (+₹800)</option>
                                <option value="photochromic">Photochromic (+₹1500)</option>
                            </select>
                        </div>

                        <!-- Delivery Information -->
                        <div class="form-section">
                            <h4><i class="bi bi-truck"></i> Delivery Information</h4>
                            <div class="row">
                                <div class="col-md-12 mb-3">
                                    <label for="deliveryAddress" class="form-label">Delivery Address *</label>
                                    <textarea class="form-control" id="deliveryAddress" rows="2" required placeholder="Enter delivery address"></textarea>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="deliveryPincode" class="form-label">Pincode *</label>
                                    <input type="text" class="form-control" id="deliveryPincode" required placeholder="6-digit pincode" maxlength="6">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="deliveryPhone" class="form-label">Phone Number *</label>
                                    <input type="tel" class="form-control" id="deliveryPhone" required placeholder="10-digit number" maxlength="10">
                                </div>
                            </div>
                        </div>

                        <!-- Delivery Options -->
                        <div class="form-section">
                            <h4><i class="bi bi-box-seam"></i> Delivery Method</h4>
                            <select class="form-select" id="deliveryMethod" required>
                                <option value="" selected disabled>Choose delivery method</option>
                                <option value="standard">Standard Delivery (5-7 days) - ₹600</option>
                                <option value="express">Express Delivery (2-3 days) - ₹1300</option>
                                <option value="overnight">Overnight Delivery (1 day) - ₹2500</option>
                            </select>
                        </div>

                        <!-- Payment Options -->
                        <div class="form-section">
                            <h4><i class="bi bi-credit-card"></i> Payment Method</h4>
                            <select class="form-select" id="paymentMethod" required>
                                <option value="" selected disabled>Choose payment method</option>
                                <option value="cod">Cash on Delivery</option>
                                <option value="card">Credit/Debit Card</option>
                                <option value="upi">UPI Payment</option>
                                <option value="netbanking">Net Banking</option>
                            </select>
                        </div>

                        <!-- Order Total -->
                        <div class="order-total">
                            <div class="total-row">
                                <span>Product Price:</span>
                                <span id="orderProductPrice">₹0</span>
                            </div>
                            <div class="total-row">
                                <span>Lens Coating:</span>
                                <span id="orderCoatingPrice">₹0</span>
                            </div>
                            <div class="total-row">
                                <span>Delivery Charges:</span>
                                <span id="orderDeliveryPrice">₹0</span>
                            </div>
                            <div class="total-row total-final">
                                <span>Total Amount:</span>
                                <span id="orderTotalPrice">₹0</span>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary order-confirm-btn" onclick="confirmOrder()">
                        <i class="bi bi-check-circle"></i> Place Order
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="home/navigation.js"></script>
    <script src="cart/cart.js"></script>
</body>
</html>