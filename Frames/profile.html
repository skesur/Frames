<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile - frames</title>
    <script src="bootstrap/bootstrap.bundle.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="home/home.css" />
    <link rel="stylesheet" href="profile/profile.css" />
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="navbar-brand nav-logo">
            <img src="image/frames_white_logo_svg.svg" alt="" width="65px" />
            <h1>frames</h1>
        </div>
        <div class="nav-body d-none d-lg-flex">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="shop.html">Shop</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="about.html">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="contact.html">Contact</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="terms.html">Terms</a>
                </li>
                <li class="nav-item">
                    <button class="btn user-btn" id="user">
                        <i class="bi bi-person-circle"></i>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="btn cart-btn" id="cart">
                        <i class="bi bi-cart3"></i>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="btn login-btn" id="logoutBtn" onclick="handleLogout()">Logout</button>
                </li>
            </ul>
        </div>
        <div class="dropdown nav-dropdown d-lg-none">
            <button class="dropdown-toggle-btn" data-bs-toggle="dropdown">
                <i class="bi bi-list"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
                <li><a href="index.html" class="dropdown-item">Home</a></li>
                <li><a href="shop.html" class="dropdown-item">Shop</a></li>
                <li><a href="about.html" class="dropdown-item">About</a></li>
                <li><a href="contact.html" class="dropdown-item">Contact</a></li>
                <li><a href="terms.html" class="dropdown-item">Terms</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                    <button class="btn cart-btn w-50 mx-5" id="cart" style="border-radius: 16px">
                        <i class="bi bi-cart3"></i>
                    </button>
                </li>
                <br />
                <li>
                    <button class="btn login-btn w-75 mx-4" onclick="handleLogout()" style="border-radius: 16px">
                        Logout
                    </button>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Profile Content -->
    <div class="profile-container">
        <div class="profile-header">
            <div class="profile-avatar">
                <i class="bi bi-person-circle"></i>
            </div>
            <h1 id="profileUsername">Loading...</h1>
            <p id="profileEmail">Loading...</p>
        </div>

        <div class="profile-details">
            <h2>Personal Information</h2>
            
            <div class="detail-grid">
                <div class="detail-item">
                    <label>Username</label>
                    <p id="detailUsername">-</p>
                </div>
                
                <div class="detail-item">
                    <label>Email</label>
                    <p id="detailEmail">-</p>
                </div>
                
                <div class="detail-item">
                    <label>Phone Number</label>
                    <p id="detailPhone">-</p>
                </div>
                
                <div class="detail-item">
                    <label>Country</label>
                    <p id="detailCountry">-</p>
                </div>
                
                <div class="detail-item full-width">
                    <label>Address</label>
                    <p id="detailAddress">-</p>
                </div>
                
                <div class="detail-item">
                    <label>Pincode</label>
                    <p id="detailPincode">-</p>
                </div>
                
                <div class="detail-item">
                    <label>Member Since</label>
                    <p id="detailCreated">-</p>
                </div>
            </div>
            
            <div class="profile-actions">
                <button class="action-btn edit-btn" onclick="openEditModal()">
                    <i class="bi bi-pencil-square"></i> Edit Profile
                </button>
                <button class="action-btn delete-btn" onclick="handleDeleteAccount()">
                    <i class="bi bi-trash"></i> Delete Account
                </button>
            </div>
        </div>

        <!-- Order History Section -->
        <div class="order-history-section">
            <h2><i class="bi bi-clock-history"></i> Order History</h2>
            
            <!-- Empty Orders Message -->
            <div class="empty-orders" id="emptyOrders" style="display: none;">
                <i class="bi bi-bag-x"></i>
                <h3>No orders yet</h3>
                <p>Start shopping and your orders will appear here</p>
                <button class="shop-now-btn" onclick="window.location.href='shop.html'">
                    <i class="bi bi-bag-fill"></i> Browse Collection
                </button>
            </div>

            <!-- Orders Grid -->
            <div class="orders-grid" id="ordersGrid">
                <!-- Orders will be generated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal fade" id="editProfileModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">
                        <i class="bi bi-pencil-square"></i> Edit Profile
                    </h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="editDetailsBody">
                    <form id="editProfileForm" class="edit-profile-form">
                        <!-- Username -->
                        <div class="form-section">
                            <h4><i class="bi bi-person"></i> Basic Information</h4>
                            <div class="mb-3">
                                <label for="editUsername" class="form-label">Username *</label>
                                <input type="text" class="form-control" id="editUsername" required placeholder="Enter username">
                            </div>
                            <div class="mb-3">
                                <label for="editEmail" class="form-label">Email *</label>
                                <input type="email" class="form-control" id="editEmail" required placeholder="Enter email" readonly>
                                <small class="form-text">Email cannot be changed</small>
                            </div>
                        </div>

                        <!-- Contact Information -->
                        <div class="form-section">
                            <h4><i class="bi bi-telephone"></i> Contact Information</h4>
                            <div class="mb-3">
                                <label for="editPhone" class="form-label">Phone Number *</label>
                                <input type="tel" class="form-control" id="editPhone" required placeholder="Enter phone number" maxlength="10" minlength="10">
                            </div>
                            <div class="mb-3">
                                <label for="editCountry" class="form-label">Country *</label>
                                <input type="text" class="form-control" id="editCountry" required placeholder="Enter country">
                            </div>
                        </div>

                        <!-- Address Information -->
                        <div class="form-section">
                            <h4><i class="bi bi-geo-alt"></i> Address Information</h4>
                            <div class="mb-3">
                                <label for="editAddress" class="form-label">Address *</label>
                                <textarea class="form-control" id="editAddress" required placeholder="Enter your address" rows="3"></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="editPincode" class="form-label">Pincode *</label>
                                <input type="text" class="form-control" id="editPincode" required placeholder="Enter pincode" maxlength="6" minlength="6">
                            </div>
                        </div>

                        <!-- Password Change (Optional) -->
                        <div class="form-section">
                            <h4><i class="bi bi-key"></i> Change Password (Optional)</h4>
                            <div class="mb-3">
                                <label for="editCurrentPassword" class="form-label">Current Password</label>
                                <input type="password" class="form-control" id="editCurrentPassword" placeholder="Enter current password">
                                <small class="form-text">Leave blank to keep current password</small>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="editNewPassword" class="form-label">New Password</label>
                                    <input type="password" class="form-control" id="editNewPassword" placeholder="Enter new password" minlength="8">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="editConfirmPassword" class="form-label">Confirm New Password</label>
                                    <input type="password" class="form-control" id="editConfirmPassword" placeholder="Confirm new password">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary save-changes-btn" onclick="saveProfileChanges()">
                        <i class="bi bi-check-circle"></i> Save Changes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div class="modal fade" id="orderDetailsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">
                        <i class="bi bi-receipt"></i> Order Details
                    </h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="orderDetailsBody">
                    <!-- Order details will be populated by JavaScript -->
                    <div id="orderDetailsContent"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="home/navigation.js"></script>
    <script src="profile/profile.js"></script>
</body>
</html>